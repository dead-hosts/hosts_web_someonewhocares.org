env:
  global:
    - secure: fkMBTMbtyzM1GCNY6d2cJBbA/Cqt7UE/hHFuIz9F2XLWGd/Rx8/lrGwlQUIbYc6FL43TrySGR3/sK1i5lk8EJNy6wF5q2Oh2ADROTdewB3xj9wnF7YGswtJm6ATA18CjvTl7RuMGkcdrxnUn/1Iep0tc8scAHPuUZfq3e/RRpumnV/tm+cqiuLJE36eJajUSgl42aGeRFuQk9Ldipht4XAT+hXwVIjYDVJ9f+bUvkN1PHjeWGbjD7o4Hbi/H4H/sWVgSBm8VC9cSNqPqw2fp2mLJyxCGg/FIvMG91sz91R/ftcCyrJD5W9ht/wYbSB14Vt5drWATdgr8U3g5C3+PEtNwei4Xuf9aO55qo7va0Q0SI3P0geGPR4T2xbKB7kfLq7tMFSp27IxOgD3MDHCaUxCyuOb9FsM/7dexusL9wGQA0QZLCetUElutL/+td6f0cWVZIAjq8AjYQGkuNGuE0noCwJpeKA/jSZB72aacA3VutaHM+iVhLRyQ2sI0eeR76Ex8oVJfVDD2Kcrcw1+28pXkGzXxFlCXjeB6h1Mjsc4SW/2wi3xWcow4oEq4pcS/57VloB82lZLvwWXqRRDFiUneHnr16VeauOWBJ5PLV+HjvSNdO1y6KKLBQpIW8YoXTNLGFOgUe8tO5EXs0RWvX/dlXjKqht3syrTj6Mds1TU=
    - GIT_NAME: Travis CI
    - GIT_EMAIL: dead-hosts@funilrys.com
    - TRAVIS_REPO_SLUG: dead-hosts/hosts_web_someonewhocares.org
    - GIT_BRANCH: master
    - UPDATE_ME_LOCATION: https://raw.githubusercontent.com/dead-hosts/repository-structure/master/update_me.py
    - ADMIN_LOCATION: https://raw.githubusercontent.com/dead-hosts/repository-structure/master/admin.py

dist: xenial
sudo: required

language: python

python:
  - "3.7"

matrix:
  fast_finish: true

cache:
  - pip

addons:
  apt:
    packages:
      - dos2unix

install:
  - pip3 install --upgrade pip
  - pip3 install requests

before_script:
  - if [[ ! -f .administrators ]]; then wget "${UPDATE_ME_LOCATION}" -o /dev/null -O update_me.py && chmod +x update_me.py; else echo "update_me not downloaded :)"; fi
  - if [[ ! -f .administrators ]]; then wget "${ADMIN_LOCATION}" -o /dev/null -O admin.py && chmod +x admin.py; else echo "admin not downloaded :)"; fi

script:
  - python3 update_me.py

notifications:
  on_success: change
  on_failure: always
