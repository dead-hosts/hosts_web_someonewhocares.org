env:
  global:
    - secure: GWcvpEg8OWs37An7zJ2ISB/88oDwdPNfv5BY16J94vtlBZZo5ndzwDCeTWdYa7AJtmeZn/t3vq+UeFzxe1/a1oppMlbPNZIrhllhaK7IS0GRUISqlEvgSj4h7qdImLaYGXWNTj/6PTbcIgkrlk44bIkzErQYnISFsClRVaAAl3XeLrxXHR00wREsPDu+d1PxgT07pHjya3UE7vJRO0cXYXUA/hGnL9dR7ttfdvQcPzLmTf7IGAuO/C5ALr2dkVLsv6t2kERTvU+a6jK4FeFjzr5aQJcrwOF72B0dwfrNEnbWFmYgu+NzDS4CMahhZZTtnmzfC9GyyEgZYxYZE84QwvLIHhkNuhyn+hwkkGP6HwC2rDdfE1nrnZob0ma+4DbOdkCLbHTuoQiqBspdkOVtGuzYoC5rMbogKQEyQOHQ6y60gr5r3dhio3pPymUC3Me6tLoo6vf4vB3k1jCS+ZnprkThsxTSyJR7WV9GGt3wi2W/gm3eWe6qHtWGjtbLKLGtKTf1CJ5dX1kfWASzsXrcwvrncUQ5gVp+bIi13L02jbW1ZGIKZoQ1YtrniAjlHjU7avXOmPBugHoRuG31/Ip6ee2vOKY3z1RUNppgJhxV0OODmlK0DMjFoZdDuk5GOhvJwaQ/MhiGz5zGzAg6Jb4f3/uMm6jl+9twviGtyR2zriI=
    - GIT_NAME: Travis CI
    - GIT_EMAIL: dead-hosts@funilrys.com
    - TRAVIS_REPO_SLUG: dead-hosts/hosts_web_someonewhocares.org
    - GIT_BRANCH: master
    - UPDATE_ME_LOCATION: https://raw.githubusercontent.com/dead-hosts/repository-structure/master/update_me.py
    - ADMIN_LOCATION: https://raw.githubusercontent.com/dead-hosts/repository-structure/master/admin.py

dist: xenial
sudo: required

language: python

python:
  - "3.7"

matrix:
  fast_finish: true

cache:
  - pip

addons:
  apt:
    packages:
      - dos2unix

install:
  - pip3 install --upgrade pip
  - pip3 install requests

before_script:
  - if [[ ! -f .administrators ]]; then wget "${UPDATE_ME_LOCATION}" -o /dev/null -O update_me.py && chmod +x update_me.py; else echo "update_me not downloaded :)"; fi
  - if [[ ! -f .administrators ]]; then wget "${ADMIN_LOCATION}" -o /dev/null -O admin.py && chmod +x admin.py; else echo "admin not downloaded :)"; fi

script:
  - python3 update_me.py

notifications:
  on_success: change
  on_failure: always
